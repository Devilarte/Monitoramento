
# MikroTik CCR1036-8G-2S+ SNMP

## Visão Geral

Versão do Zabbix: 6.0 e superiores  
O modelo para monitorar o roteadores MikroTik CCR1036-8G-2S+.

### Macros

|Nome|Descrição|Valor Padrão|
|----|-----------|-------|
|{$CPU.UTIL.CRIT} |<p>-</p> |`90` |
|{$ICMP_LOSS_WARN} |<p>-</p> |`20` |
|{$ICMP_RESPONSE_TIME_WARN} |<p>-</p> |`0.15` |
|{$IF.ERRORS.WARN} |<p>-</p> |`2` |
|{$IF.UTIL.MAX} |<p>-</p> |`90` |
|{$IFCONTROL} |<p>-</p> |`1` |
|{$MEMORY.UTIL.MAX} |<p>-</p> |`90` |
|{$NET.IF.IFADMINSTATUS.MATCHES} |<p>Ignorar Não-Presente(6)</p> |`^.*` |
|{$NET.IF.IFADMINSTATUS.NOT_MATCHES} |<p>Ignorar Down(2) Status Administrativo</p> |`^2$` |
|{$NET.IF.IFALIAS.MATCHES} |<p>-</p> |`.*` |
|{$NET.IF.IFALIAS.NOT_MATCHES} |<p>-</p> |`CHANGE_IF_NEEDED` |
|{$NET.IF.IFDESCR.MATCHES} |<p>-</p> |`.*` |
|{$NET.IF.IFDESCR.NOT_MATCHES} |<p>-</p> |`CHANGE_IF_NEEDED` |
|{$NET.IF.IFNAME.MATCHES} |<p>-</p> |`^.*$` |
|{$NET.IF.IFNAME.NOT_MATCHES} |<p>Filtrar loopbacks, nulos, links docker veth e bridge docker0 por padrão</p> |`(^Software Loopback Interface|^NULL[0-9.]*$|^[Ll]o[0-9.]*$|^[Ss]ystem$|^Nu[0-9.]*$|^veth[0-9a-z]+$|docker[0-9]+|br-[a-z0-9]{12})` |
|{$NET.IF.IFOPERSTATUS.MATCHES} |<p>-</p> |`^.*$` |
|{$NET.IF.IFOPERSTATUS.NOT_MATCHES} |<p>Ignorar Não-Presente(6)</p> |`^6$` |
|{$NET.IF.IFTYPE.MATCHES} |<p>-</p> |`.*` |
|{$NET.IF.IFTYPE.NOT_MATCHES} |<p>-</p> |`CHANGE_IF_NEEDED` |
|{$SNMP.TIMEOUT} |<p>-</p> |`5m` |
|{$TEMP_CRIT:"CPU"} |<p>-</p> |`75` |
|{$TEMP_CRIT_LOW} |<p>-</p> |`5` |
|{$TEMP_CRIT} |<p>-</p> |`60` |
|{$TEMP_WARN:"CPU"} |<p>-</p> |`70` |
|{$TEMP_WARN} |<p>-</p> |`50` |
|{$VFS.FS.PUSED.MAX.CRIT} |<p>-</p> |`90` |
|{$VFS.FS.PUSED.MAX.WARN} |<p>-</p> |`80` |

## Regras de Descoberta

|Nome|Descrição|Tipo|Chave e informações adicionais|
|----|-----------|----|----|
|Descoberta de CPU |<p>HOST-RESOURCES-MIB::hrProcessorTable discovery</p> |SNMP |hrProcessorLoad.discovery |
|Descoberta de Interfaces de Rede |<p>Descobrindo interfaces de IF-MIB.</p> |SNMP |net.if.discovery<p>**Filtro**:</p>E <p>- {#IFADMINSTATUS} MATCHES_REGEX `{$NET.IF.IFADMINSTATUS.MATCHES}`</p><p>- {#IFADMINSTATUS} NOT_MATCHES_REGEX `{$NET.IF.IFADMINSTATUS.NOT_MATCHES}`</p><p>- {#IFOPERSTATUS} MATCHES_REGEX `{$NET.IF.IFOPERSTATUS.MATCHES}`</p><p>- {#IFOPERSTATUS} NOT_MATCHES_REGEX `{$NET.IF.IFOPERSTATUS.NOT_MATCHES}`</p><p>- {#IFNAME} MATCHES_REGEX `{$NET.IF.IFNAME.MATCHES}`</p><p>- {#IFNAME} NOT_MATCHES_REGEX `{$NET.IF.IFNAME.NOT_MATCHES}`</p><p>- {#IFDESCR} MATCHES_REGEX `{$NET.IF.IFDESCR.MATCHES}`</p><p>- {#IFDESCR} NOT_MATCHES_REGEX `{$NET.IF.IFDESCR.NOT_MATCHES}`</p><p>- {#IFALIAS} MATCHES_REGEX `{$NET.IF.IFALIAS.MATCHES}`</p><p>- {#IFALIAS} NOT_MATCHES_REGEX `{$NET.IF.IFALIAS.NOT_MATCHES}`</p><p>- {#IFTYPE} MATCHES_REGEX `{$NET.IF.IFTYPE.MATCHES}`</p><p>- {#IFTYPE} NOT_MATCHES_REGEX `{$NET.IF.IFTYPE.NOT_MATCHES}`</p> |
|Descoberta de Storage |<p>HOST-RESOURCES-MIB::hrStorage</p><p>Descoberta com Filtro de Storage</p> |SNMP |storage.discovery<p>**Filtro**:</p>OR <p>- {#STORAGE_TYPE} MATCHES_REGEX `.+4$`</p><p>- {#STORAGE_TYPE} MATCHES_REGEX `.+hrStorageFixedDisk`</p> |
|Descoberta de Temperatura CPU |<p>MIKROTIK-MIB::mtxrHlProcessorTemperature</p><p>Como a temperatura da CPU não está disponível em todos os hardwares do Mikrotik, isso é feito para evitar itens não suportados.</p> |SNMP |mtxrHlProcessorTemperature.discovery |
|Descoberta de Temperatura Sensor |<p>MIKROTIK-MIB::mtxrHlTemperature</p><p>Como o sensor de temperatura não está disponível em todos os hardwares do Mikrotik, isso é feito para evitar itens não suportados.</p> |SNMP |mtxrHlTemperature.discovery |

## Itens

|Grupo|Nome|Descrição|Tipo|Chave e informações adicionais|
|-----|----|-----------|----|---------------------|
|CPU |#{#SNMPINDEX}: CPU utilization |<p>MIB: HOST-RESOURCES-MIB</p><p>A média, no último minuto, da porcentagem de tempo que esse processador não ficou ocioso. As implementações podem aproximar esse período de suavização de um minuto, se necessário.</p> |SNMP |system.cpu.util[hrProcessorLoad.{#SNMPINDEX}] |
|General |SNMP traps (fallback) |<p>O item é usado para coletar todas as traps SNMP inigualáveis por outros itens de trap SNMP</p> |SNMP_TRAP |snmptrap.fallback |
|General |Localização |<p>MIB: SNMPv2-MIB</p><p>A localização física (ex., `telephone closet, 3rd floor').  Se o local for desconhecido, o valor é a string de comprimento zero.</p> |SNMP |system.location[sysLocation.0]<p>**Pré-processando**:</p><p>- DISCARD_UNCHANGED_HEARTBEAT: `12h`</p> |
|General |Detalhes de contato do sistema |<p>MIB: SNMPv2-MIB</p><p>A identificação textual da pessoa de contato, junto com informações sobre como entrar em contato com a mesma. Se nenhuma informação for inserida, o valor é a string de comprimento zero.</p> |SNMP |system.contact[sysContact.0]<p>**Pré-processando**:</p><p>- DISCARD_UNCHANGED_HEARTBEAT: `12h`</p> |
|General |System object ID |<p>MIB: SNMPv2-MIB</p><p>A identificação oficial do fornecedor do subsistema de gerenciamento de rede contido na entidade. Este valor é alocado dentro da subárvore das empresas SMI (1.3.6.1.4.1) e fornece um meio fácil e inequívoco de determinar`que tipo de caixa' está sendo gerenciado. Por exemplo, se o fornecedor`Flintstones, Inc.' foi atribuída a subárvore 1.3.6.1.4.1.4242, ela poderia atribuir o identificador 1.3.6.1.4.1.4242.1.1 ao seu `Fred Router'.</p> |SNMP |system.objectid[sysObjectID.0]<p>**Pré-processando**:</p><p>- DISCARD_UNCHANGED_HEARTBEAT: `12h`</p> |
|General |Sistema |<p>MIB: SNMPv2-MIB</p><p>Um nome designado administrativamente. Por convenção, este é o nome de domínio completo. Se o nome for desconhecido, o valor é a string de comprimento zero.</p> |SNMP |system.name<p>**Pré-processando**:</p><p>- DISCARD_UNCHANGED_HEARTBEAT: `12h`</p> |
|General |Descrição do sistema |<p>MIB: SNMPv2-MIB</p><p>Uma descrição textual da entidade. Esse valor deve</p><p>incluir o nome completo e a identificação da versão do tipo de hardware do sistema, sistema operacional de software e</p><p>software de rede.</p> |SNMP |system.descr[sysDescr.0]<p>**Pré-processando**:</p><p>- DISCARD_UNCHANGED_HEARTBEAT: `12h`</p> |
|Inventory |Sistema Operacional |<p>MIB: MIKROTIK-MIB</p><p>Versão do Software.</p> |SNMP |system.sw.os[mtxrLicVersion.0]<p>**Pré-processando**:</p><p>- DISCARD_UNCHANGED_HEARTBEAT: `1d`</p> |
|Inventory |Modelo do dispositivo |<p>-</p> |SNMP |system.hw.model<p>**Pré-processando**:</p><p>- DISCARD_UNCHANGED_HEARTBEAT: `1d`</p> |
|Inventory |Número de Série |<p>MIB: MIKROTIK-MIB</p><p>Número de Série da RouterBOARD.</p> |SNMP |system.hw.serialnumber<p>**Pré-processando**:</p><p>- DISCARD_UNCHANGED_HEARTBEAT: `1d`</p> |
|Inventory |Versão do Firmware |<p>MIB: MIKROTIK-MIB</p><p>Versão do Firmware Atual.</p> |SNMP |system.hw.firmware<p>**Pré-processando**:</p><p>- DISCARD_UNCHANGED_HEARTBEAT: `1d`</p> |
|Memory |Memória Usada |<p>MIB: HOST-RESOURCES-MIB</p><p>A quantidade de armazenamento representada por esta entrada que é alocada, em unidades de hrStorageAllocationUnits.</p> |SNMP |vm.memory.used[hrStorageUsed.Memory]<p>**Pré-processando**:</p><p>- MULTIPLIER: `1024`</p> |
|Memory |Total de Memória |<p>MIB: HOST-RESOURCES-MIB</p><p>O tamanho do armazenamento representado por esta entrada, em unidades de hrStorageAllocationUnits. Este objeto é gravável para permitir a configuração remota do tamanho da área de armazenamento nos casos em que tal operação faz sentido e é possível no sistema subjacente. Por exemplo, a quantidade de memória principal alocada para um buffer pool pode ser modificada ou a quantidade de espaço em disco alocada para a memória virtual pode ser modificada.</p> |SNMP |vm.memory.total[hrStorageSize.Memory]<p>**Pré-processando**:</p><p>- MULTIPLIER: `1024`</p> |
|Memory |Utilização de Memória |<p>Utilização de memória em %</p> |CALCULADO |vm.memory.util[memoryUsedPercentage.Memory]<p>**Expressão**:</p>`last(//vm.memory.used[hrStorageUsed.Memory])/last(//vm.memory.total[hrStorageSize.Memory])*100` |
|Network interfaces |Interface {#IFNAME}({#IFALIAS}): Status Operacional |<p>MIB: IF-MIB</p><p>O Status Operacional atual da interface.</p><p>- O Status Testando(3) indica que nenhuma verificação de pacote operacional foi aprovada</p><p>- Se ifAdminStatus for Inativo(2) então ifOperStatus será Inativo(2)</p><p>- Se ifAdminStatus for alterado para Ativado(1), ifOperStatus deve ser alterado para Ativado(1) e a interface estará pronta para transmitir e receber tráfego de rede</p><p>- Ele deve mudar Parado(5) se a interface estiver Ociosa esperando por ações externas (como uma linha serial esperando por uma conexão de entrada)</p><p>- Ele deve permanecer no estado Inativo(2) se houver uma falha que o impeça de ir para o estado Ativado(1)</p><p>- Ele deve permanecer no estado Não-Presente(6) se a interface tiver componentes ausentes (normalmente, hardware).</p> |SNMP |net.if.status[ifOperStatus.{#SNMPINDEX}] |
|Network interfaces |Interface {#IFNAME}({#IFALIAS}): Bits received |<p>MIB: IF-MIB</p><p>O número total de octetos recebidos na interface, incluindo caracteres de enquadramento. Este objeto é uma versão de 64 bits de ifInOctets. Descontinuidades no valor deste contador podem ocorrer na reinicialização do sistema de gerenciamento e em outros momentos conforme indicado pelo valor deifCounterDiscontinuityTime.</p> |SNMP |net.if.in[ifHCInOctets.{#SNMPINDEX}]<p>**Pré-processando**:</p><p>- CHANGE_PER_SECOND</p><p>- MULTIPLIER: `8`</p> |
|Network interfaces |Interface {#IFNAME}({#IFALIAS}): Bits sent |<p>MIB: IF-MIB</p><p>O número total de octetos transmitidos pela interface, incluindo caracteres de enquadramento. Este objeto é uma versão de 64 bits de ifOutOctets. Descontinuidades no valor deste contador podem ocorrer na reinicialização do sistema de gerenciamento e em outros momentos conforme indicado pelo valor de ifCounterDiscontinuityTime.</p> |SNMP |net.if.out[ifHCOutOctets.{#SNMPINDEX}]<p>**Pré-processando**:</p><p>- CHANGE_PER_SECOND</p><p>- MULTIPLIER: `8`</p> |
|Network interfaces |Interface {#IFNAME}({#IFALIAS}): Inbound packets with errors |<p>MIB: IF-MIB</p><p>Para interfaces orientadas a pacotes, o número de pacotes de entrada que continham erros que os impediam de serem entregues a um protocolo de camada superior. Para interfaces orientadas a caracteres ou de comprimento fixo, o número de unidades de transmissão de entrada que continham erros que as impediam de serem entregues a um protocolo de camada superior. Descontinuidades no valor deste contador podem ocorrer na reinicialização do sistema de gerenciamento e em outros momentos conforme indicado pelo valor de ifCounterDiscontinuityTime.</p> |SNMP |net.if.in.errors[ifInErrors.{#SNMPINDEX}]<p>**Pré-processando**:</p><p>- CHANGE_PER_SECOND</p> |
|Network interfaces |Interface {#IFNAME}({#IFALIAS}): Outbound packets with errors |<p>MIB: IF-MIB</p><p>Para interfaces orientadas a pacotes, o número de pacotes de saída que continham erros que os impediam de serem entregues a um protocolo de camada superior. Para interfaces orientadas a caracteres ou de comprimento fixo, o número de unidades de transmissão de saída que continham erros que as impediam de serem entregues a um protocolo de camada superior. Descontinuidades no valor deste contador podem ocorrer na reinicialização do sistema de gerenciamento e em outros momentos conforme indicado pelo valor de ifCounterDiscontinuityTime.</p> |SNMP |net.if.out.errors[ifOutErrors.{#SNMPINDEX}]<p>**Pré-processando**:</p><p>- CHANGE_PER_SECOND</p> |
|Network interfaces |Interface {#IFNAME}({#IFALIAS}): Outbound packets discarded |<p>MIB: IF-MIB</p><p>O número de pacotes de saída que foram escolhidos para serem descartados</p><p>mesmo que nenhum erro tenha sido detectado para evitar que eles sejam entregues a um protocolo de camada superior.</p><p>Uma possível razão para descartar um pacote pode ser para liberar espaço no buffer.</p><p>Descontinuidades no valor deste contador podem ocorrer na reinicialização do sistema de gerenciamento,</p><p>e em outros momentos conforme indicado pelo valor de ifCounterDiscontinuityTime.</p> |SNMP |net.if.out.discards[ifOutDiscards.{#SNMPINDEX}]<p>**Pré-processando**:</p><p>- CHANGE_PER_SECOND</p> |
|Network interfaces |Interface {#IFNAME}({#IFALIAS}): Inbound packets discarded |<p>MIB: IF-MIB</p><p>O número de pacotes de entrada que foram escolhidos para serem descartados</p><p>mesmo que nenhum erro tenha sido detectado para evitar que eles sejam entregues a um protocolo de camada superior.</p><p>Uma possível razão para descartar um pacote pode ser para liberar espaço no buffer.</p><p>Descontinuidades no valor deste contador podem ocorrer na reinicialização do sistema de gerenciamento,</p><p>e em outros momentos conforme indicado pelo valor de ifCounterDiscontinuityTime.</p> |SNMP |net.if.in.discards[ifInDiscards.{#SNMPINDEX}]<p>**Pré-processando**:</p><p>- CHANGE_PER_SECOND</p> |
|Network interfaces |Interface {#IFNAME}({#IFALIAS}): Interface type |<p>MIB: IF-MIB</p><p>O tipo de interface.</p><p>Valores adicionais para ifType são atribuídos pela Internet Assigned Numbers Authority (IANA),</p><p>através da atualização da sintaxe da convenção textual IANAifType.</p> |SNMP |net.if.type[ifType.{#SNMPINDEX}]<p>**Pré-processando**:</p><p>- DISCARD_UNCHANGED_HEARTBEAT: `1d`</p> |
|Network interfaces |Interface {#IFNAME}({#IFALIAS}): Speed |<p>MIB: IF-MIB</p><p>Uma estimativa da largura de banda atual da interface em unidades de 1,000,000 de bits por segundo. Se este objeto relatar um valor de `n' então a velocidade da interface está em algum lugar na faixa de `n-500,000' para `n+499,999'.  Para interfaces que não variam em largura de banda ou para aquelas onde nenhuma estimativa precisa pode ser feita, este objeto deve conter a largura de banda nominal. Para uma subcamada que não tem conceito de largura de banda, este objeto deve ser zero.</p> |SNMP |net.if.speed[ifHighSpeed.{#SNMPINDEX}]<p>**Pré-processando**:</p><p>- MULTIPLIER: `1000000`</p><p>- DISCARD_UNCHANGED_HEARTBEAT: `1h`</p> |
|Status |Uptime |<p>MIB: SNMPv2-MIB</p><p>O tempo (em centésimos de segundo) desde a última reinicialização da parte de gerenciamento de rede do sistema.</p> |SNMP |system.uptime[sysUpTime.0]<p>**Pré-processando**:</p><p>- MULTIPLIER: `0.01`</p> |
|Status |Disponibilidade do agente SNMP |<p>Disponibilidade de verificações SNMP no host. O valor deste item corresponde aos ícones de disponibilidade na lista de hosts.</p><p>Valor Possível:</p><p>0 - Indisponível</p><p>1 - Disponível</p><p>2 - Desconhecido</p> |INTERNAL |zabbix[host,snmp,Disponível] |
|Status |ICMP ping |<p>-</p> |SIMPLE |icmpping |
|Status |ICMP loss |<p>-</p> |SIMPLE |icmppingloss |
|Status |ICMP Tempo de Resposta |<p>-</p> |SIMPLE |icmppingsec |
|Storage |Disk-{#SNMPINDEX}: Used space |<p>MIB: HOST-RESOURCES-MIB</p><p>A quantidade de armazenamento representada por esta entrada que é alocada, em unidades de hrStorageAllocationUnits.</p> |SNMP |vfs.fs.used[hrStorageSize.{#SNMPINDEX}]<p>**Pré-processando**:</p><p>- MULTIPLIER: `1024`</p> |
|Storage |Disk-{#SNMPINDEX}: Total space |<p>MIB: HOST-RESOURCES-MIB</p><p>O tamanho do armazenamento representado por esta entrada, em unidades de hrStorageAllocationUnits. Este objeto é gravável para permitir a configuração remota do tamanho da área de armazenamento nos casos em que tal operação faz sentido e é possível no sistema subjacente. Por exemplo, a quantidade de memória principal alocada para um buffer pool pode ser modificada ou a quantidade de espaço em disco alocada para a memória virtual pode ser modificada.</p> |SNMP |vfs.fs.total[hrStorageSize.{#SNMPINDEX}]<p>**Pré-processando**:</p><p>- MULTIPLIER: `1024`</p> |
|Storage |Disk-{#SNMPINDEX}: Space utilization |<p>Utilização do espaço em % para Disk-{#SNMPINDEX}</p> |CALCULADO |vfs.fs.pused[hrStorageSize.{#SNMPINDEX}]<p>**Expressão**:</p>`(last(//vfs.fs.used[hrStorageSize.{#SNMPINDEX}])/last(//vfs.fs.total[hrStorageSize.{#SNMPINDEX}]))*100` |
|Temperature |CPU: Temperatura |<p>MIB: MIKROTIK-MIB</p><p>mtxrHlProcessorTemperature Temperatura do Processador em Graus Celsius (ºC).</p> |SNMP |sensor.temp.value[mtxrHlProcessorTemperature.{#SNMPINDEX}]<p>**Pré-processando**:</p><p>- MULTIPLIER: `0.1`</p> |
|Temperature |Dispositivo: Temperatura |<p>MIB: MIKROTIK-MIB</p><p>mtxrHlTemperature Temperatura do Dispositivo em Graus Celsius (ºC).</p><p>Reference: http://wiki.mikrotik.com/wiki/Manual:SNMP</p> |SNMP |sensor.temp.value[mtxrHlTemperature.{#SNMPINDEX}]<p>**Pré-processando**:</p><p>- MULTIPLIER: `0.1`</p> |

## Gatilhos (Triggers)

|Nome|Descrição|Expressão|Severidade|Dependências  e informações adicionais|
|----|-----------|----|----|----|
|#{#SNMPINDEX}: Alta utilização da CPU |<p>A utilização da CPU está muito alta. O sistema pode demorar para responder.</p> |`min(/OKTelecomPB-CCR1036-8G-2S/system.cpu.util[hrProcessorLoad.{#SNMPINDEX}],5m)>{$CPU.UTIL.CRIT}` |WARNING | |
|O nome do sistema mudou |<p>O nome do sistema foi alterado.</p> |`last(/OKTelecomPB-CCR1036-8G-2S/system.name,#1)<>last(/OKTelecomPB-CCR1036-8G-2S/system.name,#2) and length(last(/OKTelecomPB-CCR1036-8G-2S/system.name))>0` |INFO |<p>Fechamento manual: SIM</p> |
|A descrição do sistema operacional mudou |<p>A descrição do sistema operacional foi alterada. Possíveis razões pelas quais o sistema foi atualizado ou substituído.</p> |`last(/OKTelecomPB-CCR1036-8G-2S/system.sw.os[mtxrLicVersion.0],#1)<>last(/OKTelecomPB-CCR1036-8G-2S/system.sw.os[mtxrLicVersion.0],#2) and length(last(/OKTelecomPB-CCR1036-8G-2S/system.sw.os[mtxrLicVersion.0]))>0` |INFO |<p>Fechamento manual: SIM</p><p>**Depende de**:</p><p>- O nome do sistema mudou</p> |
|O dispositivo foi substituído |<p>O número de série do dispositivo foi alterado.</p> |`last(/OKTelecomPB-CCR1036-8G-2S/system.hw.serialnumber,#1)<>last(/OKTelecomPB-CCR1036-8G-2S/system.hw.serialnumber,#2) and length(last(/OKTelecomPB-CCR1036-8G-2S/system.hw.serialnumber))>0` |INFO |<p>Fechamento manual: SIM</p> |
|Firmware mudou |<p>A versão do firmware foi alterada.</p> |`last(/OKTelecomPB-CCR1036-8G-2S/system.hw.firmware,#1)<>last(/OKTelecomPB-CCR1036-8G-2S/system.hw.firmware,#2) and length(last(/OKTelecomPB-CCR1036-8G-2S/system.hw.firmware))>0` |INFO |<p>Fechamento manual: SIM</p> |
|Alta Utilização de Memória |<p>O sistema está ficando sem memória livre.</p> |`min(/OKTelecomPB-CCR1036-8G-2S/vm.memory.util[memoryUsedPercentage.Memory],5m)>{$MEMORY.UTIL.MAX}` |AVERAGE | |
|Interface {#IFNAME}({#IFALIAS}): Link Inativo |<p>Essa expressão de Gatilho (Trigger) funciona da seguinte maneira:</p><p>1. Pode ser acionado se o status das operações estiver inativo.</p><p>2. {$IFCONTROL:"{#IFNAME}"}=1 - o usuário pode redefinir macro de contexto para valor - 0. Isso marca essa interface como não importante. Nenhum novo gatilho será acionado se esta interface estiver inativa.</p><p>3. {TEMPLATE_NAME:METRIC.diff()}=1) - gatilho (trigger) dispara somente se o Status Operacional foi Ativado(1) algum tempo antes. (Portanto, não dispare se interfaces 'ethernal off'.)</p><p>WARNING: if closed manually - won't fire again on next poll, because of .diff.</p> |`{$IFCONTROL:"{#IFNAME}"}=1 and last(/OKTelecomPB-CCR1036-8G-2S/net.if.status[ifOperStatus.{#SNMPINDEX}])=2 and (last(/OKTelecomPB-CCR1036-8G-2S/net.if.status[ifOperStatus.{#SNMPINDEX}],#1)<>last(/OKTelecomPB-CCR1036-8G-2S/net.if.status[ifOperStatus.{#SNMPINDEX}],#2))`<p>Expressão de recuperação:</p>`last(/OKTelecomPB-CCR1036-8G-2S/net.if.status[ifOperStatus.{#SNMPINDEX}])<>2 or {$IFCONTROL:"{#IFNAME}"}=0` |AVERAGE |<p>Fechamento manual: SIM</p> |
|Interface {#IFNAME}({#IFALIAS}): Alto uso de Banda |<p>A utilização da interface de rede está próxima de sua largura de banda máxima estimada.</p> |`(avg(/OKTelecomPB-CCR1036-8G-2S/net.if.in[ifHCInOctets.{#SNMPINDEX}],15m)>({$IF.UTIL.MAX:"{#IFNAME}"}/100)*last(/OKTelecomPB-CCR1036-8G-2S/net.if.speed[ifHighSpeed.{#SNMPINDEX}]) or avg(/OKTelecomPB-CCR1036-8G-2S/net.if.out[ifHCOutOctets.{#SNMPINDEX}],15m)>({$IF.UTIL.MAX:"{#IFNAME}"}/100)*last(/OKTelecomPB-CCR1036-8G-2S/net.if.speed[ifHighSpeed.{#SNMPINDEX}])) and last(/OKTelecomPB-CCR1036-8G-2S/net.if.speed[ifHighSpeed.{#SNMPINDEX}])>0`<p>Expressão de recuperação:</p>`avg(/OKTelecomPB-CCR1036-8G-2S/net.if.in[ifHCInOctets.{#SNMPINDEX}],15m)<(({$IF.UTIL.MAX:"{#IFNAME}"}-3)/100)*last(/OKTelecomPB-CCR1036-8G-2S/net.if.speed[ifHighSpeed.{#SNMPINDEX}]) and avg(/OKTelecomPB-CCR1036-8G-2S/net.if.out[ifHCOutOctets.{#SNMPINDEX}],15m)<(({$IF.UTIL.MAX:"{#IFNAME}"}-3)/100)*last(/OKTelecomPB-CCR1036-8G-2S/net.if.speed[ifHighSpeed.{#SNMPINDEX}])` |WARNING |<p>Fechamento manual: SIM</p><p>**Depende de**:</p><p>- Interface {#IFNAME}({#IFALIAS}): Link Inativo</p> |
|Interface {#IFNAME}({#IFALIAS}): Alta Taxa de Erro |<p>Recupera quando abaixo de 80% de {$IF.ERRORS.WARN:"{#IFNAME}"} limite</p> |`min(/OKTelecomPB-CCR1036-8G-2S/net.if.in.errors[ifInErrors.{#SNMPINDEX}],5m)>{$IF.ERRORS.WARN:"{#IFNAME}"} or min(/OKTelecomPB-CCR1036-8G-2S/net.if.out.errors[ifOutErrors.{#SNMPINDEX}],5m)>{$IF.ERRORS.WARN:"{#IFNAME}"}`<p>Expressão de recuperação:</p>`max(/OKTelecomPB-CCR1036-8G-2S/net.if.in.errors[ifInErrors.{#SNMPINDEX}],5m)<{$IF.ERRORS.WARN:"{#IFNAME}"}*0.8 and max(/OKTelecomPB-CCR1036-8G-2S/net.if.out.errors[ifOutErrors.{#SNMPINDEX}],5m)<{$IF.ERRORS.WARN:"{#IFNAME}"}*0.8` |WARNING |<p>Fechamento manual: SIM</p><p>**Depende de**:</p><p>- Interface {#IFNAME}({#IFALIAS}): Link Inativo</p> |
|Interface {#IFNAME}({#IFALIAS}): Ethernet Baixou a Velocidade |<p>Esta conexão Ethernet foi reduzida de sua velocidade máxima conhecida. Isso pode ser um sinal de problemas de negociação automática.</p> |`change(/OKTelecomPB-CCR1036-8G-2S/net.if.speed[ifHighSpeed.{#SNMPINDEX}])<0 and last(/OKTelecomPB-CCR1036-8G-2S/net.if.speed[ifHighSpeed.{#SNMPINDEX}])>0 and ( last(/OKTelecomPB-CCR1036-8G-2S/net.if.type[ifType.{#SNMPINDEX}])=6 or last(/OKTelecomPB-CCR1036-8G-2S/net.if.type[ifType.{#SNMPINDEX}])=7 or last(/OKTelecomPB-CCR1036-8G-2S/net.if.type[ifType.{#SNMPINDEX}])=11 or last(/OKTelecomPB-CCR1036-8G-2S/net.if.type[ifType.{#SNMPINDEX}])=62 or last(/OKTelecomPB-CCR1036-8G-2S/net.if.type[ifType.{#SNMPINDEX}])=69 or last(/OKTelecomPB-CCR1036-8G-2S/net.if.type[ifType.{#SNMPINDEX}])=117 ) and (last(/OKTelecomPB-CCR1036-8G-2S/net.if.status[ifOperStatus.{#SNMPINDEX}])<>2)`<p>Expressão de recuperação:</p>`(change(/OKTelecomPB-CCR1036-8G-2S/net.if.speed[ifHighSpeed.{#SNMPINDEX}])>0 and last(/OKTelecomPB-CCR1036-8G-2S/net.if.speed[ifHighSpeed.{#SNMPINDEX}],#2)>0) or (last(/OKTelecomPB-CCR1036-8G-2S/net.if.status[ifOperStatus.{#SNMPINDEX}])=2)` |INFO |<p>Fechamento manual: SIM</p><p>**Depende de**:</p><p>- Interface {#IFNAME}({#IFALIAS}): Link Inativo</p> |
|Foi Reiniciado |<p>O tempo de atividade é inferior a 10 minutos</p> |`last(/OKTelecomPB-CCR1036-8G-2S/system.uptime[sysUpTime.0])<10m` |WARNING |<p>Fechamento manual: SIM</p><p>**Depende de**:</p><p>- Nenhuma coleta de dados SNMP</p> |
|Nenhuma coleta de dados SNMP |<p>SNMP é Indisponível para polling. Verifique a conectividade do dispositivo e as configurações de SNMP.</p> |`max(/OKTelecomPB-CCR1036-8G-2S/zabbix[host,snmp,Disponível],{$SNMP.TIMEOUT})=0` |WARNING |<p>**Depende de**:</p><p>- ICMP Indisponível por Ping</p> |
|ICMP Indisponível por Ping |<p>As últimas três tentativas retornaram o tempo limite. Verifique a conectividade do dispositivo.</p> |`max(/OKTelecomPB-CCR1036-8G-2S/icmpping,#3)=0` |HIGH | |
|ICMP Alta Perda de Ping |<p>-</p> |`min(/OKTelecomPB-CCR1036-8G-2S/icmppingloss,5m)>{$ICMP_LOSS_WARN} and min(/OKTelecomPB-CCR1036-8G-2S/icmppingloss,5m)<100` |WARNING |<p>**Depende de**:</p><p>- ICMP Indisponível por Ping</p> |
|ICMP Tempo de Resposta de Ping Alto |<p>-</p> |`avg(/OKTelecomPB-CCR1036-8G-2S/icmppingsec,5m)>{$ICMP_RESPONSE_TIME_WARN}` |WARNING |<p>**Depende de**:</p><p>- ICMP Alta Perda de Ping</p><p>- ICMP Indisponível por Ping</p> |
|Disk-{#SNMPINDEX}: O espaço em disco está criticamente baixo |<p>Duas condições devem corresponder: primeiro, a utilização do espaço deve estar acima {$VFS.FS.PUSED.MAX.CRIT:"Disk-{#SNMPINDEX}"}.</p><p> A segunda condição deve ser uma das seguintes:</p><p> - O espaço livre em disco é inferior a 5G.</p><p> - O disco ficará cheio em menos de 24 horas.</p> |`last(/OKTelecomPB-CCR1036-8G-2S/vfs.fs.pused[hrStorageSize.{#SNMPINDEX}])>{$VFS.FS.PUSED.MAX.CRIT:"Disk-{#SNMPINDEX}"} and ((last(/OKTelecomPB-CCR1036-8G-2S/vfs.fs.total[hrStorageSize.{#SNMPINDEX}])-last(/OKTelecomPB-CCR1036-8G-2S/vfs.fs.used[hrStorageSize.{#SNMPINDEX}]))<5G or timeleft(/OKTelecomPB-CCR1036-8G-2S/vfs.fs.pused[hrStorageSize.{#SNMPINDEX}],1h,100)<1d)` |AVERAGE |<p>Fechamento manual: SIM</p> |
|Disk-{#SNMPINDEX}: O espaço em disco está baixo |<p>Duas condições devem corresponder: primeiro, a utilização do espaço deve estar acima {$VFS.FS.PUSED.MAX.WARN:"Disk-{#SNMPINDEX}"}.</p><p> A segunda condição deve ser uma das seguintes:</p><p> - O espaço livre em disco é inferior a 10G.</p><p> - O disco ficará cheio em menos de 24 horas.</p> |`last(/OKTelecomPB-CCR1036-8G-2S/vfs.fs.pused[hrStorageSize.{#SNMPINDEX}])>{$VFS.FS.PUSED.MAX.WARN:"Disk-{#SNMPINDEX}"} and ((last(/OKTelecomPB-CCR1036-8G-2S/vfs.fs.total[hrStorageSize.{#SNMPINDEX}])-last(/OKTelecomPB-CCR1036-8G-2S/vfs.fs.used[hrStorageSize.{#SNMPINDEX}]))<10G or timeleft(/OKTelecomPB-CCR1036-8G-2S/vfs.fs.pused[hrStorageSize.{#SNMPINDEX}],1h,100)<1d)` |WARNING |<p>Fechamento manual: SIM</p><p>**Depende de**:</p><p>- Disk-{#SNMPINDEX}: O espaço em disco está criticamente baixo</p> |
|CPU: Temperatura está acima do limite de aviso |<p>Este gatilho (trigger) usa os valores do sensor de temperatura, bem como o status do sensor de temperatura, se disponível</p> |`avg(/OKTelecomPB-CCR1036-8G-2S/sensor.temp.value[mtxrHlProcessorTemperature.{#SNMPINDEX}],5m)>{$TEMP_WARN:"CPU"}`<p>Expressão de recuperação:</p>`max(/OKTelecomPB-CCR1036-8G-2S/sensor.temp.value[mtxrHlProcessorTemperature.{#SNMPINDEX}],5m)<{$TEMP_WARN:"CPU"}-3` |WARNING |<p>**Depende de**:</p><p>- CPU: a temperatura está acima do limite crítico</p> |
|CPU: Temperatura está acima do limite crítico |<p>Este gatilho (trigger) usa os valores do sensor de temperatura, bem como o status do sensor de temperatura, se disponível</p> |`avg(/OKTelecomPB-CCR1036-8G-2S/sensor.temp.value[mtxrHlProcessorTemperature.{#SNMPINDEX}],5m)>{$TEMP_CRIT:"CPU"}`<p>Expressão de recuperação:</p>`max(/OKTelecomPB-CCR1036-8G-2S/sensor.temp.value[mtxrHlProcessorTemperature.{#SNMPINDEX}],5m)<{$TEMP_CRIT:"CPU"}-3` |HIGH | |
|CPU: Temperatura está muito baixa |<p>-</p> |`avg(/OKTelecomPB-CCR1036-8G-2S/sensor.temp.value[mtxrHlProcessorTemperature.{#SNMPINDEX}],5m)<{$TEMP_CRIT_LOW:"CPU"}`<p>Expressão de recuperação:</p>`min(/OKTelecomPB-CCR1036-8G-2S/sensor.temp.value[mtxrHlProcessorTemperature.{#SNMPINDEX}],5m)>{$TEMP_CRIT_LOW:"CPU"}+3` |AVERAGE | |
|Dispositivo: Temperatura está acima do limite de aviso |<p>Este gatilho (trigger) usa os valores do sensor de temperatura, bem como o status do sensor de temperatura, se disponível</p> |`avg(/OKTelecomPB-CCR1036-8G-2S/sensor.temp.value[mtxrHlTemperature.{#SNMPINDEX}],5m)>{$TEMP_WARN:"Device"}`<p>Expressão de recuperação:</p>`max(/OKTelecomPB-CCR1036-8G-2S/sensor.temp.value[mtxrHlTemperature.{#SNMPINDEX}],5m)<{$TEMP_WARN:"Device"}-3` |WARNING |<p>**Depende de**:</p><p>- Dispositivo: a temperatura está acima do limite crítico</p> |
|Dispositivo: Temperatura está acima do limite crítico |<p>Este gatilho (trigger) usa os valores do sensor de temperatura, bem como o status do sensor de temperatura, se disponível</p> |`avg(/OKTelecomPB-CCR1036-8G-2S/sensor.temp.value[mtxrHlTemperature.{#SNMPINDEX}],5m)>{$TEMP_CRIT:"Device"}`<p>Expressão de recuperação:</p>`max(/OKTelecomPB-CCR1036-8G-2S/sensor.temp.value[mtxrHlTemperature.{#SNMPINDEX}],5m)<{$TEMP_CRIT:"Device"}-3` |HIGH | |
|Dispositivo: Temperatura está muito baixa |<p>-</p> |`avg(/OKTelecomPB-CCR1036-8G-2S/sensor.temp.value[mtxrHlTemperature.{#SNMPINDEX}],5m)<{$TEMP_CRIT_LOW:"Device"}`<p>Expressão de recuperação:</p>`min(/OKTelecomPB-CCR1036-8G-2S/sensor.temp.value[mtxrHlTemperature.{#SNMPINDEX}],5m)>{$TEMP_CRIT_LOW:"Device"}+3` |AVERAGE | |
|Interface {#IFNAME}({#IFALIAS}): Iinterface {#IFNAME}({#IFALIAS}) não está funcionando |<p>A interface do ponto de acesso pode não estar funcionando por diferentes motivos - interface desativada, desligamento, link de rede desativado.</p> |`last(/OKTelecomPB-CCR1036-8G-2S/ssid.state[mtxrWlCMState.{#SNMPINDEX}])<>"running-ap"` |WARNING | |
